{"ast":null,"code":"import _slicedToArray from\"/Users/mspolermo/git/sultan-web-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'../App.css';import BasketItem from\"../components/BasketItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Basket=function Basket(_ref){var orderList=_ref.orderList,onOrderThingChange=_ref.onOrderThingChange,onRemove=_ref.onRemove,finalPrice=_ref.finalPrice,basketThingsArray=_ref.basketThingsArray;var _useState=useState(),_useState2=_slicedToArray(_useState,2),basketArray=_useState2[0],setBasketArray=_useState2[1];var basketChanger=useEffect(function(){basketThingsArray.sort(function(a,b){return a[0]-b[0];});orderList.sort(function(a,b){return a.id-b.id;});var newArray=[];for(var i=0;i<orderList.length;i++){newArray.push({id:orderList[i].id,image:orderList[i].image,title:orderList[i].title,sizeType:orderList[i].sizeType,size:orderList[i].size,barcode:orderList[i].barcode,producer:orderList[i].producer,brand:orderList[i].brand,desription:orderList[i].desription,price:orderList[i].price,careType:orderList[i].careType,basketCount:basketThingsArray[i][1]});}setBasketArray(newArray);},[basketThingsArray]);var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];useEffect(function(){if(total){onOrderThingChange===null||onOrderThingChange===void 0?void 0:onOrderThingChange(total);}},[total]);var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),removeThing=_useState6[0],setRemoveThing=_useState6[1];useEffect(function(){if(removeThing){onRemove===null||onRemove===void 0?void 0:onRemove(removeThing);}},[removeThing]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u041A\\u041E\\u0420\\u0417\\u0418\\u041D\\u0410\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"goods-list__list\",children:[basketArray===null||basketArray===void 0?void 0:basketArray.map(function(order){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BasketItem,{order:order,onTotalChange:setTotal,onRemove:setRemoveThing})},order.id);}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0418\\u0442\\u043E\\u0433\\u043E: \",finalPrice,\" \\u20B8\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer\",children:\"FOOTER\"})]});};export default Basket;","map":{"version":3,"names":["React","useEffect","useState","BasketItem","jsx","_jsx","jsxs","_jsxs","Basket","_ref","orderList","onOrderThingChange","onRemove","finalPrice","basketThingsArray","_useState","_useState2","_slicedToArray","basketArray","setBasketArray","basketChanger","sort","a","b","id","newArray","i","length","push","image","title","sizeType","size","barcode","producer","brand","desription","price","careType","basketCount","_useState3","_useState4","total","setTotal","_useState5","_useState6","removeThing","setRemoveThing","children","className","map","order","onTotalChange"],"sources":["/Users/mspolermo/git/sultan-web-app/src/pages/Basket.tsx"],"sourcesContent":["import React, {FC, useEffect, useMemo, useState} from \"react\";\nimport '../App.css'\nimport BasketItem from \"../components/BasketItem\";\nimport GoodsItem from \"../components/GoodsItem\";\nimport Header from \"../components/Header\";\nimport OrdersList from \"../components/OrdersList\";\nimport { IBasketGoods, IGoods } from \"../types/types\";\n\ninterface BasketProps{\n    orderList: IGoods[];\n    onOrderThingChange?: (OrderThing: Array<number>) => void;\n    onRemove? : (removeItem :IGoods) => void;\n    finalPrice: number;\n    basketThingsArray?:any;\n}\n\nconst Basket: FC<BasketProps> = ({orderList, onOrderThingChange, onRemove, finalPrice, basketThingsArray}) => {\n\n    const [basketArray, setBasketArray] = useState<any>();\n    \n    const basketChanger = useEffect( () => {\n        basketThingsArray.sort((a: Array<number>, b: Array<number>) => a[0] - b[0])\n        orderList.sort((a:IGoods, b:IGoods) => a.id - b.id )\n\n        let newArray = [];\n        \n        for( let i = 0; i <orderList.length; i++){\n            newArray.push({\n                id: orderList[i].id,\n                image: orderList[i].image,\n                title: orderList[i].title,\n                sizeType: orderList[i].sizeType,\n                size: orderList[i].size,\n                barcode: orderList[i].barcode,\n                producer: orderList[i].producer,\n                brand: orderList[i].brand,\n                desription: orderList[i].desription,\n                price: orderList[i].price,\n                careType: orderList[i].careType,\n                basketCount: (basketThingsArray[i])[1]\n            })\n        }\n        setBasketArray(newArray)\n    },[basketThingsArray])\n\n\n    const [total, setTotal] = useState<undefined | Array<number>>();\n    useEffect( () => {\n        if (total) {\n        onOrderThingChange?.(total)\n        } \n    }, [total])\n\n    const [removeThing, setRemoveThing] = useState<undefined | IGoods>();\n    useEffect( () => {\n        if (removeThing) {\n            onRemove?.(removeThing)\n        }\n    }, [removeThing])\n\n    return (\n        <div>\n            <div>КОРЗИНА</div>\n            <div className=\"goods-list__list\">\n            {basketArray?.map( (order:IBasketGoods) => \n                <div key={order.id} >\n                    <BasketItem \n                        order={order}\n                        onTotalChange={setTotal} \n                        onRemove={setRemoveThing}\n                    />\n                </div>    \n            )}\n            <button>Оформить заказ</button>\n            <p>Итого: {finalPrice} ₸</p>\n        </div>\n            <div className=\"footer\">FOOTER</div>\n        </div>\n    );\n};\n\nexport default Basket;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}