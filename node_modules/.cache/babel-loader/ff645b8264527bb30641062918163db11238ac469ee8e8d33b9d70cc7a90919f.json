{"ast":null,"code":"var _jsxFileName = \"/Users/mspolermo/git/sultan-web-app/src/pages/AdminPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport AddNewProduct from \"../components/AddNewProduct\";\nimport AdminList from \"../components/AdminList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPage = _ref => {\n  _s();\n  let {\n    onGoodsUpdate,\n    JSONfile\n  } = _ref;\n  const [products, setProducts] = useState(JSONfile);\n  useEffect(() => {\n    if (products) {\n      onGoodsUpdate === null || onGoodsUpdate === void 0 ? void 0 : onGoodsUpdate(products);\n    }\n  }, [products]);\n  const createProduct = newProduct => {\n    if (newProduct !== undefined) {\n      if (newProduct.title == '') {\n        alert('Заполните поле Title');\n      } else if (newProduct.image == '') {\n        alert('Вставте ссылку в поле ImageURL');\n      } else if (newProduct.sizeType == '') {\n        alert('Выберите тип размера товара');\n      } else if (newProduct.size == 0) {\n        alert('Выберите число в поле Размер');\n      } else if (newProduct.barcode == 0) {\n        alert('Выберите число в поле Штрихкод');\n      } else if (newProduct.producer == '') {\n        alert('Заполните поле Производитель');\n      } else if (newProduct.brand == '') {\n        alert('Заполните поле Бренд');\n      } else if (newProduct.desription == '') {\n        alert('Заполните поле Описание');\n      } else if (newProduct.price == 0) {\n        alert('Выберите число в поле Цена');\n      } else if (newProduct.careType.length == 1) {\n        alert('Укажите минимум 1 тип товара');\n      } else {\n        setProducts([...products, newProduct]);\n      }\n      ;\n    }\n    ;\n  };\n  const [removeThing, setRemoveThing] = useState();\n  useEffect(() => {\n    let index = products.findIndex(order => order.id === (removeThing === null || removeThing === void 0 ? void 0 : removeThing.id));\n    if (index !== -1) {\n      products.splice(index, 1);\n      setProducts([...products]);\n    }\n    ;\n  }, [removeThing]);\n  const [editThing, setEditThing] = useState();\n  useEffect(() => {\n    if (editThing !== undefined) {\n      let editProduct = editThing;\n      let index = products.findIndex(order => order.id === editProduct.id);\n      if (index !== -1) {\n        products.splice(index, 1);\n        setProducts([editProduct, ...products]);\n      }\n      ;\n    }\n    ;\n  }, [editThing]);\n  useEffect(() => {\n    const rememberMe = localStorage.getItem('storageProducts');\n    if (typeof rememberMe === 'string') {\n      const parse = JSON.parse(rememberMe); // ok\n      setProducts(parse);\n    }\n  }, []);\n  useEffect(() => {\n    setTimeout(function () {\n      localStorage.setItem('storageProducts', JSON.stringify(products));\n    }, 50);\n  }, [products]);\n  const handleFormJson = () => {\n    setProducts(JSONfile);\n    console.log(JSONfile);\n  };\n  if (products.length == 0) {\n    setProducts(JSONfile);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"data-testid\": \"admin-page\",\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"admin-page__head\",\n      children: \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u0441\\u0430\\u0439\\u0442\\u0430 \\\"\\u0421\\u0443\\u043B\\u0442\\u0430\\u043D\\\"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-page__block\",\n      children: [/*#__PURE__*/_jsxDEV(AddNewProduct, {\n        create: createProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-page__btn\",\n        onClick: handleFormJson,\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A \\u0438\\u0437 JSON-\\u0444\\u0430\\u0439\\u043B\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(AdminList, {\n      products: products,\n      onRemove: setRemoveThing,\n      onEdit: setEditThing\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n};\n_s(AdminPage, \"IuTautCKfNNR6ycZ+tmWCLIZbXM=\");\n_c = AdminPage;\nexport default AdminPage;\nvar _c;\n$RefreshReg$(_c, \"AdminPage\");","map":{"version":3,"names":["React","useEffect","useState","AddNewProduct","AdminList","jsxDEV","_jsxDEV","AdminPage","_ref","_s","onGoodsUpdate","JSONfile","products","setProducts","createProduct","newProduct","undefined","title","alert","image","sizeType","size","barcode","producer","brand","desription","price","careType","length","removeThing","setRemoveThing","index","findIndex","order","id","splice","editThing","setEditThing","editProduct","rememberMe","localStorage","getItem","parse","JSON","setTimeout","setItem","stringify","handleFormJson","console","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","create","onClick","onRemove","onEdit","_c","$RefreshReg$"],"sources":["/Users/mspolermo/git/sultan-web-app/src/pages/AdminPage.tsx"],"sourcesContent":["import React, {FC, useEffect, useMemo, useState} from \"react\";\nimport AddNewProduct from \"../components/AddNewProduct\";\nimport AdminList from \"../components/AdminList\";\nimport { IGoods } from \"../types/types\";\n\ninterface AdminPageProps {\n    onGoodsUpdate : (products :IGoods []) => void;\n    JSONfile: IGoods [];\n}\n\nconst AdminPage: FC<AdminPageProps> =({onGoodsUpdate, JSONfile}) => {\n\n    const [products, setProducts] = useState(JSONfile);\n\n    useEffect( () => {\n        if (products) {\n            onGoodsUpdate?.(products);\n        } \n    }, [products]);\n\n    const createProduct = (newProduct:IGoods) => {\n        if (newProduct !== undefined) {\n            if (newProduct.title == '') {\n                alert('Заполните поле Title');\n            } else if( newProduct.image == '') {\n                alert('Вставте ссылку в поле ImageURL');\n            } else if( newProduct.sizeType == '') {\n                alert('Выберите тип размера товара');\n            } else if( newProduct.size == 0) {\n                alert('Выберите число в поле Размер');\n            } else if( newProduct.barcode == 0) {\n                alert('Выберите число в поле Штрихкод');\n            } else if (newProduct.producer == '') {\n                alert('Заполните поле Производитель');\n            } else if (newProduct.brand == '') {\n                alert('Заполните поле Бренд');\n            } else if (newProduct.desription == '') {\n                alert('Заполните поле Описание');\n            } else if( newProduct.price == 0) {\n                alert('Выберите число в поле Цена');\n            } else if( newProduct.careType.length == 1) {\n                alert('Укажите минимум 1 тип товара');\n            } else {\n                setProducts([...products, newProduct]);\n            };\n        };\n    };\n\n\n    const [removeThing, setRemoveThing] = useState<undefined | IGoods>();\n    useEffect(() => {\n        let index = products.findIndex ( (order:any) => order.id === removeThing?.id);\n        if (index!== -1) {\n            products.splice(index, 1);\n            setProducts([...products]);\n        };\n    }, [removeThing]);\n\n\n    const [editThing, setEditThing] = useState<undefined | IGoods> ();\n    useEffect(() => {\n            if (editThing !==undefined) {\n                let editProduct: IGoods = editThing;\n                let index = products.findIndex ( (order:any) => order.id === editProduct.id);\n                if (index!== -1) {\n                    products.splice(index, 1);\n                    setProducts([editProduct, ...products]);\n                };\n            };\n\n    }, [editThing])\n\n\n    useEffect(() => {\n        const rememberMe = localStorage.getItem('storageProducts')\n        if (typeof rememberMe === 'string') {\n            const parse = JSON.parse(rememberMe) // ok\n            setProducts(parse)\n        }\n    }, [])\n\n    useEffect(() => {\n        setTimeout(function() {\n           localStorage.setItem('storageProducts', JSON.stringify(products)) \n        }, 50)   \n    }, [products])\n\n\n    const handleFormJson = () => {\n        setProducts(JSONfile)\n        console.log(JSONfile)\n    }\n\n\n    if (products.length == 0) {\n        setProducts(JSONfile)\n    }\n\n\n    \n    return (\n        <div data-testid=\"admin-page\" className=\"container\">\n            <h2 className=\"admin-page__head\">Страница администрирования сайта \"Султан\"</h2>\n            <div className=\"admin-page__block\">\n                <AddNewProduct create={createProduct}/>\n                <button className=\"admin-page__btn\" onClick={handleFormJson}>Загрузить список из JSON-файла</button>\n            </div>\n            <AdminList products={products} onRemove={setRemoveThing} onEdit={setEditThing}/>\n        </div>\n    )\n}\n\nexport default AdminPage;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}