{"ast":null,"code":"import _slicedToArray from\"/Users/mspolermo/git/sultan-web-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'../App.css';import BasketItem from\"../components/BasketItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Basket=function Basket(_ref){var orderList=_ref.orderList,onOrderThingChange=_ref.onOrderThingChange,onRemove=_ref.onRemove,finalPrice=_ref.finalPrice,basketThingsArray=_ref.basketThingsArray,onOffer=_ref.onOffer;var _useState=useState(),_useState2=_slicedToArray(_useState,2),basketArray=_useState2[0],setBasketArray=_useState2[1];console.log(basketArray);var basketChanger=useEffect(function(){basketThingsArray.sort(function(a,b){return a[0]-b[0];});orderList.sort(function(a,b){return a.id-b.id;});var newArray=[];for(var i=0;i<orderList.length;i++){newArray.push({id:orderList[i].id,image:orderList[i].image,title:orderList[i].title,sizeType:orderList[i].sizeType,size:orderList[i].size,barcode:orderList[i].barcode,producer:orderList[i].producer,brand:orderList[i].brand,desription:orderList[i].desription,price:orderList[i].price,careType:orderList[i].careType,basketCount:basketThingsArray[i][1]});}setBasketArray(newArray);},[basketThingsArray]);var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];useEffect(function(){if(total){onOrderThingChange===null||onOrderThingChange===void 0?void 0:onOrderThingChange(total);}},[total]);var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),removeThing=_useState6[0],setRemoveThing=_useState6[1];useEffect(function(){if(removeThing){onRemove===null||onRemove===void 0?void 0:onRemove(removeThing);//console.log(removeThing)\n}},[removeThing]);var offer=function offer(){alert('Спасибо за заказ!');setBasketArray([]);onOffer===null||onOffer===void 0?void 0:onOffer([]);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u041A\\u041E\\u0420\\u0417\\u0418\\u041D\\u0410\"}),/*#__PURE__*/_jsx(\"div\",{className:\"goods-list__list\",children:basketArray===null||basketArray===void 0?void 0:basketArray.map(function(order){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BasketItem,{order:order,onTotalChange:setTotal,onRemove:setRemoveThing})},order.id);})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:offer,children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0418\\u0442\\u043E\\u0433\\u043E: \",finalPrice,\" \\u20B8\"]})]})]});};export default Basket;","map":{"version":3,"names":["React","useEffect","useState","BasketItem","jsx","_jsx","jsxs","_jsxs","Basket","_ref","orderList","onOrderThingChange","onRemove","finalPrice","basketThingsArray","onOffer","_useState","_useState2","_slicedToArray","basketArray","setBasketArray","console","log","basketChanger","sort","a","b","id","newArray","i","length","push","image","title","sizeType","size","barcode","producer","brand","desription","price","careType","basketCount","_useState3","_useState4","total","setTotal","_useState5","_useState6","removeThing","setRemoveThing","offer","alert","children","className","map","order","onTotalChange","onClick"],"sources":["/Users/mspolermo/git/sultan-web-app/src/pages/Basket.tsx"],"sourcesContent":["import React, {FC, useEffect, useMemo, useState} from \"react\";\nimport '../App.css'\nimport BasketItem from \"../components/BasketItem\";\nimport { IBasketGoods, IGoods } from \"../types/types\";\n\ninterface BasketProps{\n    orderList: IGoods[];\n    onOrderThingChange?: (OrderThing: Array<number>) => void;\n    onRemove? : (removeItem :IGoods) => void;\n    finalPrice: number;\n    basketThingsArray?:any;\n    onOffer: any;\n}\n\nconst Basket: FC<BasketProps> = ({orderList, onOrderThingChange, onRemove, finalPrice, basketThingsArray, onOffer}) => {\n\n    const [basketArray, setBasketArray] = useState<any>();\n    console.log(basketArray)\n\n    const basketChanger = useEffect( () => {\n        basketThingsArray.sort((a: Array<number>, b: Array<number>) => a[0] - b[0])\n        orderList.sort((a:IGoods, b:IGoods) => a.id - b.id )\n\n        let newArray = [];\n        \n        for( let i = 0; i <orderList.length; i++){\n            newArray.push({\n                id: orderList[i].id,\n                image: orderList[i].image,\n                title: orderList[i].title,\n                sizeType: orderList[i].sizeType,\n                size: orderList[i].size,\n                barcode: orderList[i].barcode,\n                producer: orderList[i].producer,\n                brand: orderList[i].brand,\n                desription: orderList[i].desription,\n                price: orderList[i].price,\n                careType: orderList[i].careType,\n                basketCount: (basketThingsArray[i])[1]\n            })\n        }\n        setBasketArray(newArray)\n    },[basketThingsArray])\n\n\n    const [total, setTotal] = useState<undefined | Array<number>>();\n    useEffect( () => {\n        if (total) {\n        onOrderThingChange?.(total)\n        } \n    }, [total])\n\n    const [removeThing, setRemoveThing] = useState<undefined | IGoods>();\n    useEffect( () => {\n        if (removeThing) {\n            onRemove?.(removeThing)\n            //console.log(removeThing)\n        }\n    }, [removeThing])\n\n    const offer = () => {\n        alert('Спасибо за заказ!')\n        setBasketArray([])\n        onOffer?.([])\n    }\n\n    return (\n        <div>\n            <div>КОРЗИНА</div>\n            <div className=\"goods-list__list\">\n                {basketArray?.map( (order:IBasketGoods) => \n                    <div key={order.id} >\n                        <BasketItem \n                            order={order}\n                            onTotalChange={setTotal} \n                            onRemove={setRemoveThing}\n                        />\n                    </div>    \n                )}\n            \n            </div>\n            <div>\n                <button onClick={offer}>Оформить заказ</button>\n                <p>Итого: {finalPrice} ₸</p>   \n            </div>\n        </div>\n    );\n};\n\nexport default Basket;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}