{"ast":null,"code":"import _slicedToArray from\"/Users/mspolermo/git/sultan-web-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import BasketItem from\"../components/BasketItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Basket=function Basket(_ref){var orderList=_ref.orderList,onOrderThingChange=_ref.onOrderThingChange,onRemove=_ref.onRemove,finalPrice=_ref.finalPrice,basketThingsArray=_ref.basketThingsArray,onOffer=_ref.onOffer;var _useState=useState(),_useState2=_slicedToArray(_useState,2),basketArray=_useState2[0],setBasketArray=_useState2[1];var basketChanger=useEffect(function(){basketThingsArray.sort(function(a,b){return a[0]-b[0];});orderList.sort(function(a,b){return a.id-b.id;});var newArray=[];for(var i=0;i<orderList.length;i++){newArray.push({id:orderList[i].id,image:orderList[i].image,title:orderList[i].title,sizeType:orderList[i].sizeType,size:orderList[i].size,barcode:orderList[i].barcode,producer:orderList[i].producer,brand:orderList[i].brand,desription:orderList[i].desription,price:orderList[i].price,careType:orderList[i].careType,basketCount:basketThingsArray[i][1]});}setBasketArray(newArray);},[basketThingsArray]);var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];useEffect(function(){if(total){onOrderThingChange===null||onOrderThingChange===void 0?void 0:onOrderThingChange(total);};},[total]);var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),removeThing=_useState6[0],setRemoveThing=_useState6[1];useEffect(function(){if(removeThing){onRemove===null||onRemove===void 0?void 0:onRemove(removeThing);}},[removeThing]);var _useState7=useState('basket__mesasge_hidden'),_useState8=_slicedToArray(_useState7,2),openMessage=_useState8[0],setOpenMessage=_useState8[1];var offer=function offer(){setOpenMessage('basket__mesasge');};var closing=function closing(){setOpenMessage('basket__mesasge_hidden');setBasketArray([]);onOffer===null||onOffer===void 0?void 0:onOffer([]);};return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"basket-page\",className:\"basket\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container basket__container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"basket__heading\",children:\"\\u041A\\u041E\\u0420\\u0417\\u0418\\u041D\\u0410\"}),/*#__PURE__*/_jsx(\"div\",{className:\"basket__list\",children:basketArray===null||basketArray===void 0?void 0:basketArray.map(function(order){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BasketItem,{order:order,onTotalChange:setTotal,onRemove:setRemoveThing})},order.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"basket__summary\",children:[/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"order-element\",onClick:offer,className:\"basket__btn_order\",children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsxs(\"p\",{\"data-testid\":\"price-element\",className:\"basket__price basket__price_final\",children:[finalPrice,\" \\u20B8\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:openMessage,children:[/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"close-element\",className:\"basket__close\",onClick:closing,children:\"x\"}),/*#__PURE__*/_jsxs(\"svg\",{width:\"59\",height:\"59\",viewBox:\"0 0 59 59\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"rect\",{width:\"59\",height:\"59\",rx:\"29.5\",fill:\"#FFC85E\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M19.5 29.5L24.75 34.5L27.375 31.5\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M25.5 29.5L30.75 34.5L39.5 24.5\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M33.5 24.5L30 28.5\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"basket__head\",children:\"\\u0421\\u043F\\u0430\\u0441\\u0438\\u0431\\u043E \\u0437\\u0430 \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"p\",{className:\"basket__text-message\",children:\"\\u041D\\u0430\\u0448 \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440 \\u0441\\u0432\\u044F\\u0436\\u0435\\u0442\\u0441\\u044F \\u0441 \\u0432\\u0430\\u043C\\u0438 \\u0432 \\u0431\\u043B\\u0438\\u0436\\u0430\\u0439\\u0448\\u0435\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F\"})]})]});};export default Basket;","map":{"version":3,"names":["React","useEffect","useState","BasketItem","jsx","_jsx","jsxs","_jsxs","Basket","_ref","orderList","onOrderThingChange","onRemove","finalPrice","basketThingsArray","onOffer","_useState","_useState2","_slicedToArray","basketArray","setBasketArray","basketChanger","sort","a","b","id","newArray","i","length","push","image","title","sizeType","size","barcode","producer","brand","desription","price","careType","basketCount","_useState3","_useState4","total","setTotal","_useState5","_useState6","removeThing","setRemoveThing","_useState7","_useState8","openMessage","setOpenMessage","offer","closing","className","children","map","order","onTotalChange","onClick","width","height","viewBox","fill","xmlns","rx","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin"],"sources":["/Users/mspolermo/git/sultan-web-app/src/pages/Basket.tsx"],"sourcesContent":["import React, {FC, useEffect, useState} from \"react\";\nimport BasketItem from \"../components/BasketItem\";\nimport { IBasketGoods, IGoods } from \"../types/types\";\n\ninterface BasketProps{\n    orderList: IGoods[];\n    onOrderThingChange?: (OrderThing: Array<number>) => void;\n    onRemove? : (removeItem :IGoods) => void;\n    finalPrice: number;\n    basketThingsArray?:any;\n    onOffer: any;\n}\n\nconst Basket: FC<BasketProps> = ({orderList, onOrderThingChange, onRemove, finalPrice, basketThingsArray, onOffer}) => {\n\n    const [basketArray, setBasketArray] = useState<any>();\n\n    const basketChanger = useEffect( () => {\n        basketThingsArray.sort((a: Array<number>, b: Array<number>) => a[0] - b[0]);\n        orderList.sort((a:IGoods, b:IGoods) => a.id - b.id );\n\n        let newArray = [];\n        \n        for( let i = 0; i <orderList.length; i++){\n            newArray.push({\n                id: orderList[i].id,\n                image: orderList[i].image,\n                title: orderList[i].title,\n                sizeType: orderList[i].sizeType,\n                size: orderList[i].size,\n                barcode: orderList[i].barcode,\n                producer: orderList[i].producer,\n                brand: orderList[i].brand,\n                desription: orderList[i].desription,\n                price: orderList[i].price,\n                careType: orderList[i].careType,\n                basketCount: (basketThingsArray[i])[1]\n            })\n        }\n        setBasketArray(newArray);\n    },[basketThingsArray]);\n\n    const [total, setTotal] = useState<undefined | Array<number>>();\n    useEffect( () => {\n        if (total) {\n        onOrderThingChange?.(total);\n        }; \n    }, [total]);\n\n    const [removeThing, setRemoveThing] = useState<undefined | IGoods>();\n    useEffect( () => {\n        if (removeThing) {\n            onRemove?.(removeThing)\n        }\n    }, [removeThing]);\n\n    const [openMessage, setOpenMessage] = useState('basket__mesasge_hidden');\n    const offer = () => {\n        setOpenMessage('basket__mesasge');\n    };\n    const closing = () => {\n        setOpenMessage('basket__mesasge_hidden');\n        setBasketArray([]);\n        onOffer?.([]);\n    };\n\n    return (\n        <div data-testid=\"basket-page\" className='basket'>\n            <div className='container basket__container'>\n                <div className=\"basket__heading\">КОРЗИНА</div>\n                <div className=\"basket__list\">\n                    {basketArray?.map( (order:IBasketGoods) => \n                        <div key={order.id} >\n                            <BasketItem \n                                order={order}\n                                onTotalChange={setTotal} \n                                onRemove={setRemoveThing}\n                            />\n                        </div>    \n                    )}\n                </div>\n                <div className=\"basket__summary\">\n                    <button data-testid='order-element' onClick={offer} className=\"basket__btn_order\">Оформить заказ</button>\n                    <p data-testid='price-element' className=\"basket__price basket__price_final\">{finalPrice} ₸</p>   \n                </div>\n            </div>\n            <div className={openMessage}>\n                <button data-testid='close-element' className=\"basket__close\" onClick={closing}>x</button>\n                <svg width=\"59\" height=\"59\" viewBox=\"0 0 59 59\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"59\" height=\"59\" rx=\"29.5\" fill=\"#FFC85E\"/><path d=\"M19.5 29.5L24.75 34.5L27.375 31.5\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><path d=\"M25.5 29.5L30.75 34.5L39.5 24.5\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><path d=\"M33.5 24.5L30 28.5\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n                <h2 className=\"basket__head\">Спасибо за заказ</h2>\n                <p className=\"basket__text-message\">Наш менеджер свяжется с вами в ближайшее время</p>\n            </div>\n        </div>\n    );\n};\n\nexport default Basket;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}