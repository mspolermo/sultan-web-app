{"ast":null,"code":"import _toConsumableArray from\"/Users/mspolermo/git/sultan-web-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mspolermo/git/sultan-web-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useMemo,useState}from\"react\";import AddNewProduct from\"../components/AddNewProduct\";import AdminList from\"../components/AdminList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminPage=function AdminPage(_ref){var onGoodsUpdate=_ref.onGoodsUpdate,JSONfile=_ref.JSONfile;// const Breadcrumbs = ({ ...rest, match }) => (\n//     <span>\n//         <Link to={match.url || ''} className={match.isExact ? 'breadcrumb active' : 'breadcrumb'}>\n//             {match.url.substr(match.url.lastIndexOf('/')+1, match.url.length)}\n//         </Link>\n//         <Route path={`${match.url}/:path`} component={Breadcrumbs} />\n//     </span>\n//   )\nvar _useState=useState(JSONfile),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];useEffect(function(){if(products){onGoodsUpdate===null||onGoodsUpdate===void 0?void 0:onGoodsUpdate(products);}},[products]);var createProduct=function createProduct(newProduct){if(newProduct!==undefined){if(newProduct.title==''){alert('Заполните поле Title');}else if(newProduct.image==''){alert('Вставте ссылку в поле ImageURL');}else if(newProduct.sizeType==''){alert('Выберите тип размера товара');}else if(newProduct.size==0){alert('Выберите число в поле Размер');}else if(newProduct.barcode==0){alert('Выберите число в поле Штрихкод');}else if(newProduct.producer==''){alert('Заполните поле Производитель');}else if(newProduct.brand==''){alert('Заполните поле Бренд');}else if(newProduct.desription==''){alert('Заполните поле Описание');}else if(newProduct.price==0){alert('Выберите число в поле Цена');}else if(newProduct.careType.length==1){alert('Укажите минимум 1 тип товара');}else{setProducts([].concat(_toConsumableArray(products),[newProduct]));}}};var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),removeThing=_useState4[0],setRemoveThing=_useState4[1];useMemo(function(){var index=products.findIndex(function(order){return order.id===(removeThing===null||removeThing===void 0?void 0:removeThing.id);});if(index!==-1){products.splice(index,1);setProducts(_toConsumableArray(products));}},[removeThing]);var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),editThing=_useState6[0],setEditThing=_useState6[1];useMemo(function(){if(editThing!==undefined){var editProduct=editThing;var index=products.findIndex(function(order){return order.id===editProduct.id;});console.log(index);if(index!==-1){products.splice(index,1);setProducts([editProduct].concat(_toConsumableArray(products)));console.log('изменили');}}},[editThing]);useEffect(function(){var rememberMe=localStorage.getItem('storageProducts');if(typeof rememberMe==='string'){var parse=JSON.parse(rememberMe);// ok\nsetProducts(parse);}},[]);useEffect(function(){localStorage.setItem('storageProducts',JSON.stringify(products));},[products]);var handleFormJson=function handleFormJson(){setProducts(JSONfile);};if(products.length==0){setProducts(JSONfile);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"admin-page__head\",children:\"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u0441\\u0430\\u0439\\u0442\\u0430 \\\"\\u0421\\u0443\\u043B\\u0442\\u0430\\u043D\\\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page__block\",children:[/*#__PURE__*/_jsx(AddNewProduct,{create:createProduct}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-page__btn\",onClick:handleFormJson,children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A \\u0438\\u0437 JSON-\\u0444\\u0430\\u0439\\u043B\\u0430\"})]}),/*#__PURE__*/_jsx(AdminList,{products:products,onRemove:setRemoveThing,onEdit:setEditThing})]});};export default AdminPage;","map":{"version":3,"names":["React","useEffect","useMemo","useState","AddNewProduct","AdminList","jsx","_jsx","jsxs","_jsxs","AdminPage","_ref","onGoodsUpdate","JSONfile","_useState","_useState2","_slicedToArray","products","setProducts","createProduct","newProduct","undefined","title","alert","image","sizeType","size","barcode","producer","brand","desription","price","careType","length","concat","_toConsumableArray","_useState3","_useState4","removeThing","setRemoveThing","index","findIndex","order","id","splice","_useState5","_useState6","editThing","setEditThing","editProduct","console","log","rememberMe","localStorage","getItem","parse","JSON","setItem","stringify","handleFormJson","className","children","create","onClick","onRemove","onEdit"],"sources":["/Users/mspolermo/git/sultan-web-app/src/pages/AdminPage.tsx"],"sourcesContent":["import React, {FC, useEffect, useMemo, useState} from \"react\";\nimport AddNewProduct from \"../components/AddNewProduct\";\nimport AdminList from \"../components/AdminList\";\nimport { IGoods } from \"../types/types\";\n\ninterface AdminPageProps {\n    onGoodsUpdate : (products :IGoods []) => void;\n    JSONfile: IGoods []\n}\n\nconst AdminPage: FC<AdminPageProps> =({onGoodsUpdate, JSONfile}) => {\n\n\n    // const Breadcrumbs = ({ ...rest, match }) => (\n    //     <span>\n    //         <Link to={match.url || ''} className={match.isExact ? 'breadcrumb active' : 'breadcrumb'}>\n    //             {match.url.substr(match.url.lastIndexOf('/')+1, match.url.length)}\n    //         </Link>\n    //         <Route path={`${match.url}/:path`} component={Breadcrumbs} />\n    //     </span>\n    //   )\n\n    const [products, setProducts] = useState(JSONfile)\n    useEffect( () => {\n        if (products) {\n            onGoodsUpdate?.(products)\n        } \n    }, [products])\n\n\n\n    const createProduct = (newProduct:IGoods) => {\n        if (newProduct !== undefined) {\n        if (newProduct.title == '') {\n            alert('Заполните поле Title')\n        } else if( newProduct.image == '') {\n            alert('Вставте ссылку в поле ImageURL')\n        } else if( newProduct.sizeType == '') {\n            alert('Выберите тип размера товара')\n        } else if( newProduct.size == 0) {\n            alert('Выберите число в поле Размер')\n        } else if( newProduct.barcode == 0) {\n            alert('Выберите число в поле Штрихкод')\n        } else if (newProduct.producer == '') {\n            alert('Заполните поле Производитель')\n        } else if (newProduct.brand == '') {\n            alert('Заполните поле Бренд')\n        } else if (newProduct.desription == '') {\n            alert('Заполните поле Описание')\n        } else if( newProduct.price == 0) {\n            alert('Выберите число в поле Цена')\n        } else if( newProduct.careType.length == 1) {\n            alert('Укажите минимум 1 тип товара')\n        } else {\n            setProducts([...products, newProduct])\n        }\n    }\n    }\n\n\n    const [removeThing, setRemoveThing] = useState<undefined | IGoods>();\n    useMemo(() => {\n\n        let index = products.findIndex ( (order:any) => order.id === removeThing?.id)\n    \n        if (index!== -1) {\n            products.splice(index, 1);\n          \n            setProducts([...products])\n        }\n    }, [removeThing])\n\n\n    const [editThing, setEditThing] = useState<undefined | IGoods> ()\n    useMemo(() => {\n            if (editThing !==undefined) {\n                let editProduct: IGoods = editThing\n                let index = products.findIndex ( (order:any) => order.id === editProduct.id)\n                console.log(index)\n                if (index!== -1) {\n                    products.splice(index, 1);\n                \n                    setProducts([editProduct, ...products])\n                    console.log('изменили')\n                }\n            }\n\n    }, [editThing])\n\n\n    useEffect(() => {\n\n        const rememberMe = localStorage.getItem('storageProducts')\n        if (typeof rememberMe === 'string') {\n            const parse = JSON.parse(rememberMe) // ok\n            setProducts(parse)\n        }\n\n    }, [])\n\n    useEffect(() => {\n        localStorage.setItem('storageProducts', JSON.stringify(products))\n    }, [products])\n\n\n    const handleFormJson = () => {\n        setProducts(JSONfile)\n    }\n\n\n    if (products.length == 0) {\n        setProducts(JSONfile)\n    }\n\n\n    \n    return (\n        <div className=\"container\">\n            <h2 className=\"admin-page__head\">Страница администрирования сайта \"Султан\"</h2>\n            <div className=\"admin-page__block\">\n                <AddNewProduct create={createProduct}/>\n                <button className=\"admin-page__btn\" onClick={handleFormJson}>Загрузить список из JSON-файла</button>\n            </div>\n            <AdminList products={products} onRemove={setRemoveThing} onEdit={setEditThing}/>\n        </div>\n    )\n}\n\nexport default AdminPage;\n\n"],"mappings":"0PAAA,MAAO,CAAAA,KAAK,EAAOC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAO,OAAO,CAC7D,MAAO,CAAAC,aAAa,KAAM,6BAA6B,CACvD,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAQhD,GAAM,CAAAC,SAA6B,CAAE,QAA/B,CAAAA,SAA6BA,CAAAC,IAAA,CAAiC,IAA7B,CAAAC,aAAa,CAAAD,IAAA,CAAbC,aAAa,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAG1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAAC,SAAA,CAAgCX,QAAQ,CAACU,QAAQ,CAAC,CAAAE,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3CG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5Bd,SAAS,CAAE,UAAM,CACb,GAAIgB,QAAQ,CAAE,CACVL,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAGK,QAAQ,CAAC,CAC7B,CACJ,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAId,GAAM,CAAAE,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,UAAiB,CAAK,CACzC,GAAIA,UAAU,GAAKC,SAAS,CAAE,CAC9B,GAAID,UAAU,CAACE,KAAK,EAAI,EAAE,CAAE,CACxBC,KAAK,CAAC,sBAAsB,CAAC,CACjC,CAAC,IAAM,IAAIH,UAAU,CAACI,KAAK,EAAI,EAAE,CAAE,CAC/BD,KAAK,CAAC,gCAAgC,CAAC,CAC3C,CAAC,IAAM,IAAIH,UAAU,CAACK,QAAQ,EAAI,EAAE,CAAE,CAClCF,KAAK,CAAC,6BAA6B,CAAC,CACxC,CAAC,IAAM,IAAIH,UAAU,CAACM,IAAI,EAAI,CAAC,CAAE,CAC7BH,KAAK,CAAC,8BAA8B,CAAC,CACzC,CAAC,IAAM,IAAIH,UAAU,CAACO,OAAO,EAAI,CAAC,CAAE,CAChCJ,KAAK,CAAC,gCAAgC,CAAC,CAC3C,CAAC,IAAM,IAAIH,UAAU,CAACQ,QAAQ,EAAI,EAAE,CAAE,CAClCL,KAAK,CAAC,8BAA8B,CAAC,CACzC,CAAC,IAAM,IAAIH,UAAU,CAACS,KAAK,EAAI,EAAE,CAAE,CAC/BN,KAAK,CAAC,sBAAsB,CAAC,CACjC,CAAC,IAAM,IAAIH,UAAU,CAACU,UAAU,EAAI,EAAE,CAAE,CACpCP,KAAK,CAAC,yBAAyB,CAAC,CACpC,CAAC,IAAM,IAAIH,UAAU,CAACW,KAAK,EAAI,CAAC,CAAE,CAC9BR,KAAK,CAAC,4BAA4B,CAAC,CACvC,CAAC,IAAM,IAAIH,UAAU,CAACY,QAAQ,CAACC,MAAM,EAAI,CAAC,CAAE,CACxCV,KAAK,CAAC,8BAA8B,CAAC,CACzC,CAAC,IAAM,CACHL,WAAW,IAAAgB,MAAA,CAAAC,kBAAA,CAAKlB,QAAQ,GAAEG,UAAU,GAAE,CAC1C,CACJ,CACA,CAAC,CAGD,IAAAgB,UAAA,CAAsCjC,QAAQ,EAAsB,CAAAkC,UAAA,CAAArB,cAAA,CAAAoB,UAAA,IAA7DE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClCnC,OAAO,CAAC,UAAM,CAEV,GAAI,CAAAsC,KAAK,CAAGvB,QAAQ,CAACwB,SAAS,CAAG,SAACC,KAAS,QAAK,CAAAA,KAAK,CAACC,EAAE,IAAKL,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEK,EAAE,IAAC,CAE7E,GAAIH,KAAK,GAAI,CAAC,CAAC,CAAE,CACbvB,QAAQ,CAAC2B,MAAM,CAACJ,KAAK,CAAE,CAAC,CAAC,CAEzBtB,WAAW,CAAAiB,kBAAA,CAAKlB,QAAQ,EAAE,CAC9B,CACJ,CAAC,CAAE,CAACqB,WAAW,CAAC,CAAC,CAGjB,IAAAO,UAAA,CAAkC1C,QAAQ,EAAuB,CAAA2C,UAAA,CAAA9B,cAAA,CAAA6B,UAAA,IAA1DE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B5C,OAAO,CAAC,UAAM,CACN,GAAI6C,SAAS,GAAI1B,SAAS,CAAE,CACxB,GAAI,CAAA4B,WAAmB,CAAGF,SAAS,CACnC,GAAI,CAAAP,KAAK,CAAGvB,QAAQ,CAACwB,SAAS,CAAG,SAACC,KAAS,QAAK,CAAAA,KAAK,CAACC,EAAE,GAAKM,WAAW,CAACN,EAAE,GAAC,CAC5EO,OAAO,CAACC,GAAG,CAACX,KAAK,CAAC,CAClB,GAAIA,KAAK,GAAI,CAAC,CAAC,CAAE,CACbvB,QAAQ,CAAC2B,MAAM,CAACJ,KAAK,CAAE,CAAC,CAAC,CAEzBtB,WAAW,EAAE+B,WAAW,EAAAf,MAAA,CAAAC,kBAAA,CAAKlB,QAAQ,GAAE,CACvCiC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC,CAC3B,CACJ,CAER,CAAC,CAAE,CAACJ,SAAS,CAAC,CAAC,CAGf9C,SAAS,CAAC,UAAM,CAEZ,GAAM,CAAAmD,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAC1D,GAAI,MAAO,CAAAF,UAAU,GAAK,QAAQ,CAAE,CAChC,GAAM,CAAAG,KAAK,CAAGC,IAAI,CAACD,KAAK,CAACH,UAAU,CAAC,CAAC;AACrClC,WAAW,CAACqC,KAAK,CAAC,CACtB,CAEJ,CAAC,CAAE,EAAE,CAAC,CAENtD,SAAS,CAAC,UAAM,CACZoD,YAAY,CAACI,OAAO,CAAC,iBAAiB,CAAED,IAAI,CAACE,SAAS,CAACzC,QAAQ,CAAC,CAAC,CACrE,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAGd,GAAM,CAAA0C,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CACzBzC,WAAW,CAACL,QAAQ,CAAC,CACzB,CAAC,CAGD,GAAII,QAAQ,CAACgB,MAAM,EAAI,CAAC,CAAE,CACtBf,WAAW,CAACL,QAAQ,CAAC,CACzB,CAIA,mBACIJ,KAAA,QAAKmD,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBtD,IAAA,OAAIqD,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,iOAAyC,EAAK,cAC/EpD,KAAA,QAAKmD,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAC9BtD,IAAA,CAACH,aAAa,EAAC0D,MAAM,CAAE3C,aAAc,EAAE,cACvCZ,IAAA,WAAQqD,SAAS,CAAC,iBAAiB,CAACG,OAAO,CAAEJ,cAAe,CAAAE,QAAA,CAAC,8IAA8B,EAAS,GAClG,cACNtD,IAAA,CAACF,SAAS,EAACY,QAAQ,CAAEA,QAAS,CAAC+C,QAAQ,CAAEzB,cAAe,CAAC0B,MAAM,CAAEjB,YAAa,EAAE,GAC9E,CAEd,CAAC,CAED,cAAe,CAAAtC,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}